<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ares Kombat. Return</title>
<style>
body {margin:0;font-family:Arial,sans-serif;background:#1e1e1e;color:#fff;display:flex;flex-direction:column;height:100vh;overflow:hidden;}
.header {background:#2c2c2c;color:#fff;padding:10px;display:flex;align-items:center;border-bottom:1px solid #444;flex-shrink:0;}
.header .avatar {width:40px;height:40px;border-radius:50%;background:#0088cc;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:bold;margin-right:10px;font-size:18px;}
.header .info {display:flex;flex-direction:column;}
.chat {flex:1;padding:15px;overflow-y:auto;display:flex;flex-direction:column;background:#1e1e1e;}
.msg {max-width:70%;padding:10px 14px;margin:5px 0;border-radius:18px;word-wrap:break-word;line-height:1.4;font-size:14px;position:relative;opacity:0;transform:translateY(10px);animation:fadeIn 0.3s forwards;}
@keyframes fadeIn {to{opacity:1;transform:translateY(0);}}
.bot {background:#2f2f2f;align-self:flex-start;border-top-left-radius:0;}
.bot::before {content:'';position:absolute;left:-6px;top:10px;width:0;height:0;border-top:8px solid transparent;border-bottom:8px solid transparent;border-right:6px solid #2f2f2f;}
.user {background:#0088cc;color:#fff;align-self:flex-end;border-top-right-radius:0;}
.user::after {content:'';position:absolute;right:-6px;top:10px;width:0;height:0;border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:6px solid #0088cc;}
.buttons {padding:10px;display:flex;justify-content:center;gap:10px;border-top:1px solid #444;background:#2c2c2c;flex-shrink:0;position:sticky;bottom:0;}
.coin-button, .stats-button, .promo-button, .shop-button {width:120px;height:50px;background:#3a3a3a;color:#fff;border:none;border-radius:12px;font-size:16px;cursor:pointer;text-align:center;}
.modal {display:none;position:fixed;z-index:200;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.7);}
.modal-content {background-color:#2c2c2c;margin:15% auto;padding:20px;border-radius:12px;width:80%;max-width:400px;color:#fff;}
.modal-content input {width:100%;padding:10px;border-radius:12px;border:none;background:#3a3a3a;color:#fff;font-size:16px;margin-bottom:10px;}
.modal-content button {padding:10px 15px;border-radius:12px;border:none;background:#0088cc;color:#fff;font-size:16px;cursor:pointer;}
</style>
</head>
<body>

<div class="header">
  <div class="avatar">A</div>
  <div class="info">
    <strong>Ares Kombat</strong>
    <small>bot</small>
  </div>
</div>

<div class="chat" id="chat"></div>

<div class="buttons">
  <button class="coin-button" id="coinButton">–ü–æ–ª—É—á–∏—Ç—å üèÜ</button>
  <button class="stats-button" id="statsButton">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
  <button class="promo-button" id="promoButton">–í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–æ–∫–æ–¥</button>
  <button class="shop-button" id="shopButton">–ú–∞–≥–∞–∑–∏–Ω</button>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞ -->
<div id="promoModal" class="modal">
  <div class="modal-content">
    <h3>–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥</h3>
    <input type="text" id="promoInput" placeholder="–ö–æ–¥">
    <button onclick="applyPromo()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞ -->
<div id="shopModal" class="modal">
  <div class="modal-content">
    <h3>–ú–∞–≥–∞–∑–∏–Ω</h3>
    <div>
      <p>–ê–≤–∞—Ç–∞—Ä–∫–∞ –æ—Ç –ò–ò - 70 üèÜ <button onclick="buyItem('–ê–≤–∞—Ç–∞—Ä–∫–∞ –æ—Ç –ò–ò', 70)">–ö—É–ø–∏—Ç—å</button></p>
      <p>–ê–≤–∞—Ç–∞—Ä–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑ - 120 üèÜ <button onclick="buyItem('–ê–≤–∞—Ç–∞—Ä–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑', 120)">–ö—É–ø–∏—Ç—å</button></p>
      <p>–î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–µ –æ–±–æ–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω - 150 üèÜ <button onclick="buyItem('–î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–µ –æ–±–æ–∏ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω', 150)">–ö—É–ø–∏—Ç—å</button></p>
    </div>
  </div>
  </div><script>
const chat = document.getElementById("chat");
const coinButton = document.getElementById("coinButton");
const statsButton = document.getElementById("statsButton");
const promoButton = document.getElementById("promoButton");
const shopButton = document.getElementById("shopButton");
const promoModal = document.getElementById("promoModal");
const promoInput = document.getElementById("promoInput");
const shopModal = document.getElementById("shopModal");

let totalCoins = parseInt(localStorage.getItem("totalCoins")) || 0;
let awaitingReady = false;
let nextRewardTime = localStorage.getItem("nextRewardTime") ? new Date(localStorage.getItem("nextRewardTime")) : null;

const promoCodes = {
  "ARESKOMBATSTART": 30,
  "AUTUMNKOMBAT25": 40,
  "SCHOOLPREMIUM01": 50
};

function scrollChat() { chat.scrollTo({ top: chat.scrollHeight, behavior: "smooth" }); }

function addBotMessage(text) {
  const msg = document.createElement("div");
  msg.className = "msg bot";
  msg.innerHTML = text;
  chat.appendChild(msg);
  scrollChat();
}

function addUserMessage(text) {
  const msgUser = document.createElement("div");
  msgUser.className = "msg user";
  msgUser.textContent = text;
  chat.appendChild(msgUser);
  scrollChat();
}

function generateRandomCode(length = 10) {
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let result = '';
  for (let i=0;i<length;i++){result += chars.charAt(Math.floor(Math.random()*chars.length));}
  return result;
}

// –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
window.onload = () => {
  addBotMessage(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É Ares Kombat!`);
  addBotMessage(`–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–æ–º–∞–Ω–¥—É "–ü–æ–ª—É—á–∏—Ç—å üèÜ"`);
}

// –ö–Ω–æ–ø–∫–∞ "–ü–æ–ª—É—á–∏—Ç—å üèÜ"
coinButton.addEventListener("click", () => {
  addUserMessage(coinButton.textContent);
  const now = new Date();
  if (nextRewardTime && now < nextRewardTime) {
    const diff = Math.floor((nextRewardTime - now)/1000);
    const h = Math.floor(diff/3600);
    const m = Math.floor((diff%3600)/60);
    const s = diff%60;
    addBotMessage(`–°–ª–µ–¥—É—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ ${h} —á ${m} –º–∏–Ω ${s} —Å–µ–∫`);
    return;
  }
  if (!awaitingReady){
    addBotMessage(`–í—ã –ø–æ–ª—É—á–∏–ª–∏ 10 üèÜ! –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–ì–æ—Ç–æ–≤–æ", —á—Ç–æ–±—ã –∏—Ö –ø–æ–ª—É—á–∏—Ç—å.`);
    coinButton.textContent = "–ì–æ—Ç–æ–≤–æ";
    awaitingReady = true;
  } else {
    totalCoins += 10;
    localStorage.setItem("totalCoins", totalCoins);
    addBotMessage("–ì–æ—Ç–æ–≤–æ!");
    nextRewardTime = new Date(now.getTime() + 12*60*60*1000);
    localStorage.setItem("nextRewardTime", nextRewardTime);
    addBotMessage(`–°–ª–µ–¥—É—é—â–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–∑ –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ 12 —á–∞—Å–æ–≤.`);
    coinButton.textContent = "–ü–æ–ª—É—á–∏—Ç—å üèÜ";
    awaitingReady = false;

    if (totalCoins >= 10000 && !localStorage.getItem("codeSent")) {
      const userCode = generateRandomCode(10);
      localStorage.setItem("codeSent", userCode);
      addBotMessage(`üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ 10 000 üèÜ. –í–∞—à –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∫–æ–¥: ${userCode}`);
    }
  }
});

// –ö–Ω–æ–ø–∫–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
statsButton.addEventListener("click", () => {
  addUserMessage("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞");
  addBotMessage(`–í—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${totalCoins} üèÜ –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è.`);
});

// –ü—Ä–æ–º–æ–∫–æ–¥
promoButton.addEventListener("click", ()=>{promoModal.style.display="block";});
function applyPromo(){
  const code = promoInput.value.trim().toUpperCase();
  promoModal.style.display="none";
  promoInput.value="";
  addUserMessage(`–ü—Ä–æ–º–æ–∫–æ–¥: ${code}`);
  if(promoCodes[code]){
    totalCoins += promoCodes[code];
    localStorage.setItem("totalCoins", totalCoins);
    addBotMessage(`–ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! –í—ã –ø–æ–ª—É—á–∏–ª–∏ ${promoCodes[code]} üèÜ.`);
    if (totalCoins >= 10000 && !localStorage.getItem("codeSent")) {
      const userCode = generateRandomCode(10);
      localStorage.setItem("codeSent", userCode);
      addBotMessage(`üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ 10 000 üèÜ. –í–∞—à –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∫–æ–¥: ${userCode}`);
    }
  } else { addBotMessage(`–ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥.`); }
}

// –ú–∞–≥–∞–∑–∏–Ω
shopButton.addEventListener("click", ()=>{shopModal.style.display="block";});
function buyItem(itemName, price){
  if(totalCoins < price){shopModal.style.display="none"; addBotMessage(`–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üèÜ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.`); return;}
  totalCoins -= price; localStorage.setItem("totalCoins", totalCoins);
  shopModal.style.display="none";
  const receiptCode = generateRandomCode(10);
  addBotMessage(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –≤—ã –∫—É–ø–∏–ª–∏ ${itemName}. –í–∞—à –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —á–µ–∫: ${receiptCode}`);
  addBotMessage(`–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç, –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <a href="https://t.me/apec_sun" style="color:#0088cc;">@apec_sun</a>`);
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –Ω–∏—Ö
window.onclick = function(event){
  if(event.target == promoModal){promoModal.style.display="none";}
  if(event.target == shopModal){shopModal.style.display="none";}
}
</script>
</body>
  </html>
