<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ares Kombat. Return</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: #1a1a1a;
    color: #fff;
    height: 100%;
    overflow: hidden;
  }

  .content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: calc(100% - 60px);
    padding: 10px;
    text-align: center;
  }

  .bottom-menu {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: space-around;
    background: #111;
    padding: 10px 0;
    z-index: 10;
  }

  .bottom-menu button {
    background: #333;
    border: none;
    padding: 10px 20px;
    color: #fff;
    font-size: 16px;
    border-radius: 10px;
  }

  .hidden {
    display: none;
  }

  .profile div {
    margin: 5px 0;
  }

  .profile button {
    padding: 8px 16px;
    margin: 5px;
    border: none;
    border-radius: 10px;
    background: #555;
    color: #fff;
    font-size: 14px;
  }

  .profile button:active {
    background: #777;
  }

  .button-main {
    font-size: 30px;
    padding: 20px 40px;
    border-radius: 20px;
    background: #444;
    color: #fff;
    border: none;
    margin-top: 20px;
  }

  .button-main:active {
    background: #666;
  }

  /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
  .modal {
    position: fixed;
    top:0;
    left:0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.85);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 100;
  }

  .modal-content {
    background: #222;
    padding: 20px;
    border-radius: 15px;
    text-align: center;
    width: 90%;
    max-width: 350px;
  }

  .modal-content input {
    width: 80%;
    padding: 10px;
    margin: 10px 0;
    border-radius: 10px;
    border: none;
  }

  .modal-content button {
    padding: 10px 20px;
    border-radius: 10px;
    border: none;
    background: #555;
    color: #fff;
    font-size: 16px;
    margin-top: 10px;
    cursor: pointer;
  }

  .modal-content button:active {
    background: #777;
  }
</style>
</head>
<body>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div id="registerModal" class="modal">
  <div class="modal-content">
    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
    <input type="text" id="nameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"><br>
    <input type="text" id="usernameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º (Telegram)"><br>
    <button id="registerBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
<div id="messageModal" class="modal">
  <div class="modal-content">
    <p id="messageText"></p>
    <button id="closeMessageBtn">–û–∫</button>
  </div>
</div>

<div class="content">
  <!-- –ö–ª–∏–∫–µ—Ä -->
  <div id="clickerView">
    <h2>–ö–ª–∏–∫–µ—Ä</h2>
    <button class="button-main" id="clickerButton">üëä –ù–∞–∂–º–∏!</button>
    <div style="margin-top: 20px;">üèÜ: <span id="clickerScore">0</span></div>
  </div>

  <!-- –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ -->
  <div id="classicView" class="hidden">
    <h2>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫</h2>
    <button class="button-main" id="earnButton">–ó–∞–±—Ä–∞—Ç—å 60 üèÜ</button>
    <p>–°–ª–µ–¥—É—é—â–∞—è –≤—ã–¥–∞—á–∞ —á–µ—Ä–µ–∑: <span id="earnTimer">0 —á</span></p>
  </div>

  <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
  <div id="profileView" class="hidden">
    <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
    <div class="profile">
      <div>–ò–º—è: <span id="profileName"></span></div>
      <div>–Æ–∑–µ—Ä–Ω–µ–π–º: <span id="profileUsername"></span></div>
      <div>ID: <span id="profileID">#001</span></div>
      <hr>
      <div>üèÜ –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="profileScore">0</span></div>
      <hr>
      <button onclick="showMessage('–í –º–∞–≥–∞–∑–∏–Ω–µ –ø–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤ :(')">–ú–∞–≥–∞–∑–∏–Ω</button>
      <button onclick="showMessage('–î–ª—è –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π :(')">–ó–∞–¥–∞–Ω–∏—è</button>
      <button onclick="showMessage('–ú—ã –µ—â—ë –Ω–µ –ø—Ä–∏–¥—É–º–∞–ª–∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã :(')">–ü—Ä–æ–º–æ–∫–æ–¥—ã</button>
    </div>
  </div>
</div>

<div class="bottom-menu">
  <button onclick="showView('clickerView')">–ö–ª–∏–∫–µ—Ä</button>
  <button onclick="showView('classicView')">–ó–∞—Ä–∞–±–æ—Ç–æ–∫</button>
  <button onclick="showView('profileView')">–ü—Ä–æ—Ñ–∏–ª—å</button>
</div>

<script>
let score = parseInt(localStorage.getItem('score')) || 0;
let lastEarnTime = parseInt(localStorage.getItem('lastEarnTime')) || 0;
let timerInterval;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
window.onload = function() {
  if (!localStorage.getItem('name') || !localStorage.getItem('username')) {
    document.getElementById('registerModal').style.display = 'flex';
  } else {
    loadProfile();
  }
  updateScore();
  startEarnTimer();
}

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
document.getElementById('registerBtn').addEventListener('click', () => {
  const name = document.getElementById('nameInput').value.trim();
  const username = document.getElementById('usernameInput').value.trim();
  
  if(name && username) {
    localStorage.setItem('name', name);
    localStorage.setItem('username', username);
    document.getElementById('registerModal').style.display = 'none';
    loadProfile();
  } else {
    showMessage("–í–≤–µ–¥–∏—Ç–µ –æ–±–∞ –ø–æ–ª—è!");
  }
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
function loadProfile() {
  document.getElementById('profileName').textContent = localStorage.getItem('name');
  document.getElementById('profileUsername').textContent = localStorage.getItem('username');
}

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
function showView(viewId) {
  document.getElementById('clickerView').classList.add('hidden');
  document.getElementById('classicView').classList.add('hidden');
  document.getElementById('profileView').classList.add('hidden');
  document.getElementById(viewId).classList.remove('hidden');
}

// –ö–ª–∏–∫–µ—Ä
document.getElementById('clickerButton').addEventListener('click', () => {
  score++;
  saveScore();
  updateScore();
});

// –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫
document.getElementById('earnButton').addEventListener('click', () => {
  const now = Date.now();
  if (now - lastEarnTime >= 8*60*60*1000) { // 8 —á–∞—Å–æ–≤
    score += 60;
    lastEarnTime = now;
    saveScore();
    saveLastEarnTime();
    updateScore();
    showMessage("–í—ã –ø–æ–ª—É—á–∏–ª–∏ 60 üèÜ!");
    startEarnTimer();
  } else {
    showMessage("–í—ã —É–∂–µ –∑–∞–±—Ä–∞–ª–∏ –∑–∞—Ä–∞–±–æ—Ç–æ–∫. –ü–æ–¥–æ–∂–¥–∏—Ç–µ!");
  }
});

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
function updateScore() {
  document.getElementById('clickerScore').textContent = score;
  document.getElementById('profileScore').textContent = score;
}

// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—á—ë—Ç –≤ localStorage
function saveScore() {
  localStorage.setItem('score', score);
}

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–±–æ—Ä–∞
function saveLastEarnTime() {
  localStorage.setItem('lastEarnTime', lastEarnTime);
}

// –¢–∞–π–º–µ—Ä –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∫–∞
function startEarnTimer() {
  if (timerInterval) clearInterval(timerInterval);
  function updateTimer() {
    const now = Date.now();
    const nextEarn = lastEarnTime + 8*60*60*1000;
    let remaining = nextEarn - now;
    if (remaining <= 0) {
      document.getElementById('earnTimer').textContent = "0 —á";
      clearInterval(timerInterval);
      timerInterval = null;
    } else {
      const hours = Math.floor(remaining / (1000*60*60));
      const minutes = Math.floor((remaining % (1000*60*60)) / (1000*60));
      document.getElementById('earnTimer').textContent = `${hours} —á ${minutes} –º–∏–Ω`;
    }
  }
  updateTimer();
  timerInterval = setInterval(updateTimer, 1000 * 60);
}

// –ú–æ–¥–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
function showMessage(msg) {
  document.getElementById('messageText').textContent = msg;
  document.getElementById('messageModal').style.display = 'flex';
}

document.getElementById('closeMessageBtn').addEventListener('click', () => {
  document.getElementById('messageModal').style.display = 'none';
});
</script>

</body>
  </html>
